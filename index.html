<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galib Academy | মেগা পরীক্ষা ২০২৬</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --primary: #1a237e; --secondary: #2e7d32; --accent: #ff9800; --bg: #f4f7f9; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 0; }
        .header { background: linear-gradient(135deg, var(--primary), #3949ab); color: white; padding: 25px; text-align: center; border-bottom: 5px solid var(--accent); }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .btn { display: block; width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; text-align: center; text-decoration: none; margin-top: 10px; font-size: 16px; }
        .btn-exam { background: var(--secondary); color: white; }
        .timer-sticky { position: sticky; top: 0; background: #fff; padding: 15px; border-bottom: 3px solid var(--primary); display: flex; justify-content: space-between; align-items: center; z-index: 1000; font-weight: bold; }
        .q-box { background: #fff; padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #ddd; }
        .hidden { display: none; }
        input { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        #certificate-template { width: 800px; height: 600px; padding: 50px; text-align: center; border: 20px double var(--primary); background: #fffdf5; position: absolute; left: -9999px; }
    </style>
</head>
<body>

<div class="header">
    <h1>গালিব একাডেমি (Galib Academy)</h1>
    <p>অনলাইন মেধা যাচাই পরীক্ষা - ২০২৬ | তারিখ: ২৫ জানুয়ারি ২০২৬</p>
</div>

<div class="container" id="reg-area">
    <div class="card">
        <h3 style="text-align:center;">শিক্ষার্থী রেজিস্ট্রেশন</h3>
        <p style="background: #e8f5e9; padding: 10px; border-left: 5px solid #2e7d32;">নগদ (০১৭৩৪৫০৫৮৬৯) পেমেন্ট করে পাসওয়ার্ড সংগ্রহ করুন।</p>
        <input type="text" id="s-name" placeholder="আপনার নাম">
        <input type="number" id="s-roll" placeholder="রোল নম্বর">
        <input type="text" id="s-madrasa" placeholder="মাদ্রাসার নাম">
        <button class="btn btn-exam" onclick="saveInfo()">পরবর্তী ধাপ</button>
    </div>
</div>

<div class="container hidden" id="class-selection">
    <div class="card">
        <h2 style="text-align:center;">ক্লাস নির্বাচন করুন</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <button class="btn btn-exam" onclick="selectClass('q9')">৯ম শ্রেণি</button>
            <button class="btn btn-exam" onclick="selectClass('q9')">৮ম শ্রেণি</button>
            <button class="btn btn-exam" onclick="selectClass('q9')">৭ম শ্রেণি</button>
            <button class="btn btn-exam" onclick="selectClass('q9')">৬ষ্ঠ শ্রেণি</button>
        </div>
    </div>
</div>

<div class="container hidden" id="pass-area">
    <div class="card">
        <h3 style="text-align:center;">সিকিউরিটি পাসওয়ার্ড</h3>
        <input type="password" id="exam-pass" placeholder="পাসওয়ার্ড লিখুন">
        <button class="btn btn-exam" onclick="validatePassword()">পরীক্ষা শুরু করুন</button>
    </div>
</div>

<div class="container hidden" id="exam-section">
    <div class="timer-sticky">
        <span id="st-display"></span>
        <div>সময়: <span id="exam-timer" style="color:red; font-size:24px;">১০:০০</span></div>
    </div>
    <div id="questions-list"></div>
    <button class="btn btn-exam" onclick="submitExam()">পরীক্ষা জমা দিন</button>
</div>

<div class="container hidden" id="result-section">
    <div class="card" style="text-align:center;">
        <h2>ফলাফল</h2>
        <div id="final-score" style="font-size:35px; font-weight:bold; margin:20px;"></div>
        <button class="btn btn-exam" onclick="generateCertificate()" style="background:#007bff;">সনদ ডাউনলোড</button>
        <a id="wa-send" href="#" target="_blank" class="btn" style="background:#25d366; color:white;">স্যারকে রেজাল্ট পাঠান</a>
    </div>
</div>

<div id="certificate-template">
    <h1 style="color:#1a237e; font-size: 50px;">গালিব একাডেমি</h1>
    <h2>সাফল্যের সনদপত্র</h2>
    <p style="font-size:24px;">এই মর্মে প্রত্যয়ন করা যাচ্ছে যে, <b><span id="cert-name"></span></b></p>
    <p style="font-size:22px;">মাদ্রাসা: <span id="cert-m"></span>, রোল: <span id="cert-r"></span></p>
    <p style="font-size:22px;">তিনি মেধা যাচাই পরীক্ষায় ৩০-এ <b><span id="cert-s"></span></b> নম্বর পেয়ে উত্তীর্ণ হয়েছেন।</p>
    <div style="margin-top:80px; display:flex; justify-content:space-between; padding: 0 60px;">
        <div><p>২৫/০১/২০২৬</p><p style="border-top:1px solid #000;">তারিখ</p></div>
        <div><p><b>গালিব ইবনে রফিক</b></p><p style="border-top:1px solid #000;">পরিচালক স্বাক্ষর</p></div>
    </div>
</div>

<script>
    let studentData = {};
    const validPasswords = ["আলহামদুলিল্লাহ", "বিসমিল্লাহ", "সুবহানাল্লাহ", "আল্লাহু আকবর"];

    if(localStorage.getItem('galib_exam_done')) {
        document.body.innerHTML = "<h2 style='text-align:center; margin-top:100px;'>আপনি একবার পরীক্ষা দিয়েছেন।</h2>";
    }

    function saveInfo() {
        const n = document.getElementById('s-name').value;
        const r = document.getElementById('s-roll').value;
        const m = document.getElementById('s-madrasa').value;
        if(!n || !r || !m) return alert("সব তথ্য দিন");
        studentData = { name: n, roll: r, madrasa: m };
        document.getElementById('reg-area').classList.add('hidden');
        document.getElementById('class-selection').classList.remove('hidden');
    }

    function selectClass(cls) { document.getElementById('class-selection').classList.add('hidden'); document.getElementById('pass-area').classList.remove('hidden'); }

    function validatePassword() {
        const p = document.getElementById('exam-pass').value.trim();
        if(p === "GalibAdmin") { startExam(true); return; }
        if(validPasswords.includes(p)) { startExam(false); } else { alert("ভুল পাসওয়ার্ড!"); }
    }

    const q9 = [
        {q: "২০২৬ পাঠ্যবই অনুযায়ী 'আল-ফিকহ' এর অর্থ কী?", o: ["মুখস্থ করা", "গভীর জ্ঞান", "পড়া", "লেখা"], a: "গভীর জ্ঞান"},
        {q: "মাখরাজ মোট কয়টি?", o: ["১৫টি", "১৮টি", "১৭টি", "২০টি"], a: "১৭টি"},
        {q: "তাজভিদ অনুযায়ী কুরআন পড়া কী?", o: ["সুন্নত", "ওয়াজিব", "মুস্তাহাব", "মাকরূহ"], a: "ওয়াজিব"},
        {q: "মাদ্দে লাযিম কত আলিফ টানতে হয়?", o: ["১ আলিফ", "২ আলিফ", "৩ আলিফ", "৪ আলিফ"], a: "৪ আলিফ"},
        {q: "হলকের হরফ কয়টি?", o: ["৪টি", "৫টি", "৬টি", "৭টি"], a: "৬টি"},
        {q: "ইদগাম অর্থ কী?", o: ["স্পষ্ট করা", "টেনে পড়া", "গোপন করা", "মিলিয়ে পড়া"], a: "মিলিয়ে পড়া"},
        {q: "মাদ্দে আসলী কত আলিফ?", o: ["৩ আলিফ", "১ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "১ আলিফ"},
        {q: "জিহ্বার মধ্যখান থেকে কোন হরফটি বের হয়?", o: ["ক্বাফ", "লাম", "জিম", "নুন"], a: "জিম"},
        {q: "ইদগামে বেলা-গুন্নাহর হরফ কয়টি?", o: ["৪টি", "২টি", "৬টি", "৮টি"], a: "২টি"},
        {q: "ইখফার হরফ কয়টি?", o: ["১২টি", "১০টি", "১৫টি", "১৭টি"], a: "১৫টি"},
        {q: "ইকলাব এর হরফ কোনটি?", o: ["তা", "সা", "জিম", "বা"], a: "বা"},
        {q: "ওয়াজিব গুন্নাহ কখন হয়?", o: ["যযম হলে", "পেশ হলে", "নুন ও মীমে তাশদীদ হলে", "যের হলে"], a: "নুন ও মীমে তাশদীদ হলে"},
        {q: "আল্লাহ শব্দের লাম মোটা হয় কখন?", o: ["যের থাকলে", "যবর বা পেশ থাকলে", "সব সময়", "কখনো না"], a: "যবর বা পেশ থাকলে"},
        {q: "হুরূফে শামসিয়া কয়টি?", o: ["১২টি", "১০টি", "১৪টি", "১৬টি"], a: "১৪টি"},
        {q: "কুরআনে মোট সেজদাহ কয়টি?", o: ["১৫টি", "১৪টি", "১২টি", "১৩টি"], a: "১৪টি"},
        {q: "তাজভীদ শাস্ত্রের প্রবর্তক কে?", o: ["সাহাবীগণ", "ইমামগণ", "সবাই", "রাসূল (সা.)"], a: "রাসূল (সা.)"},
        {q: "কলকলাহর হরফ কয়টি?", o: ["৬টি", "৪টি", "৫টি", "৭টি"], a: "৫টি"},
        {q: "মাদ্দে লীন এর হরফ কয়টি?", o: ["৩টি", "৪টি", "২টি", "৫টি"], a: "২টি"},
        {q: "পবিত্র কুরআনে রুকু সংখ্যা কতটি?", o: ["৫৪০", "৫৫৬", "৫৫৮", "৫৬০"], a: "৫৫৬"},
        {q: "তারকীক শব্দের অর্থ কী?", o: ["মোটা করা", "স্পষ্ট করা", "চিকন করা", "টানা"], a: "চিকন করা"},
        {q: "মাদ্দে আরজি কত আলিফ টানতে হয়?", o: ["১ আলিফ", "২ আলিফ", "৩ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
        {q: "ওয়াকফ শব্দের অর্থ কী?", o: ["পড়া", "চলা", "থামা", "মিলানো"], a: "থামা"},
        {q: "সিফাত মোট কতটি?", o: ["১৮টি", "১৯টি", "১৭টি", "২০টি"], a: "১৭টি"},
        {q: "মাদ্দে মুনফাসিল কত আলিফ?", o: ["১ আলিফ", "২ আলিফ", "৩ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
        {q: "তানভীন কাকে বলে?", o: ["যযম", "২ যবর, ২ যের, ২ পেশ", "তাশদীদ", "মাদ্দ"], a: "২ যবর, ২ যের, ২ পেশ"},
        {q: "জান্নাতের চাবি কোনটি?", o: ["হজ", "সালাত", "যাকাত", "সাওম"], a: "সালাত"},
        {q: "প্রথম আযান দাতা কে?", o: ["আবু বকর (রা)", "বিলাল (রা)", "হামজা (রা)", "খালিদ (রা)"], a: "বিলাল (রা)"},
        {q: "মাতা-পিতার অবাধ্য হওয়া কী?", o: ["সগিরা গুনাহ", "জায়েজ", "কবিরা গুনাহ", "মাকরূহ"], a: "কবিরা গুনাহ"},
        {q: "মাদ্দে মুত্তাসিল কত আলিফ?", o: ["৩ আলিফ", "১ আলিফ", "৪ আলিফ", "২ আলিফ"], a: "৪ আলিফ"},
        {q: "মক্বার বিজয়ের সাল কোনটি?", o: ["৬ হিজরি", "৭ হিজরি", "৯ হিজরি", "৮ হিজরি"], a: "৮ হিজরি"}
    ];

    function startExam(admin) {
        window.isAdmin = admin;
        document.getElementById('pass-area').classList.add('hidden');
        document.getElementById('exam-section').classList.remove('hidden');
        document.getElementById('st-display').innerText = "শিক্ষার্থী: " + studentData.name;
        
        const list = document.getElementById('questions-list');
        const qs = q9.sort(() => 0.5 - Math.random());
        list.innerHTML = qs.map((item, i) => `
            <div class="q-box">
                <p><b>${i+1}. ${item.q}</b></p>
                ${item.o.map(opt => `<label style="display:block; margin:8px 0; cursor:pointer;"><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`).join('')}
                <input type="hidden" id="ans${i}" value="${item.a}">
            </div>
        `).join('');

        let sec = 600;
        window.timer = setInterval(() => {
            sec--;
            let m = Math.floor(sec/60); let s = sec%60;
            document.getElementById('exam-timer').innerText = `${m}:${s<10?'0':''}${s}`;
            if(sec <= 0) submitExam();
        }, 1000);
    }

    function submitExam() {
        clearInterval(window.timer);
        if(!window.isAdmin) localStorage.setItem('galib_exam_done', 'true');
        let score = 0;
        for(let i=0; i<30; i++) {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            if(sel && sel.value === document.getElementById(`ans${i}`).value) score++;
        }
        window.finalScore = score;
        document.getElementById('exam-section').classList.add('hidden');
        document.getElementById('result-section').classList.remove('hidden');
        document.getElementById('final-score').innerText = `স্কোর: ${score}/৩০`;
        document.getElementById('wa-send').href = `https://wa.me/8801734505869?text=নাম: ${studentData.name}, রোল: ${studentData.roll}, মাদ্রাসা: ${studentData.madrasa}, স্কোর: ${score}/৩০`;
    }

    function generateCertificate() {
        document.getElementById('cert-name').innerText = studentData.name;
        document.getElementById('cert-m').innerText = studentData.madrasa;
        document.getElementById('cert-r').innerText = studentData.roll;
        document.getElementById('cert-s').innerText = window.finalScore;
        html2canvas(document.getElementById('certificate-template')).then(canvas => {
            let link = document.createElement('a');
            link.download = studentData.name + '_Cert.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }
</script>
</body>
</html>
