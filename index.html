<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galib Academy | অনলাইন পরীক্ষা ২০২৬</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --primary: #1a237e; --secondary: #2e7d32; --accent: #ff9800; --bg: #f4f7f9; --gold: #c5a059; --error: #d32f2f; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 0; color: #333; }
        
        /* UI Styles */
        .header { background: linear-gradient(135deg, var(--primary), #3949ab); color: white; padding: 30px; text-align: center; border-bottom: 5px solid var(--accent); }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        .btn { display: block; width: 100%; padding: 14px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; text-align: center; font-size: 16px; transition: 0.3s; margin-top: 10px; text-decoration: none; box-sizing: border-box; }
        .btn-exam { background: var(--secondary); color: white; }
        .btn-exam:hover { background: #1b5e20; transform: translateY(-2px); }
        .btn-wa { background: #25d366; color: white; }
        
        .q-box { background: #fff; padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .option-label { display: block; padding: 12px; margin: 8px 0; background: #f9f9f9; border-radius: 6px; cursor: pointer; border: 1px solid #ddd; transition: 0.2s; }
        .option-label:hover { background: #e8f5e9; border-color: var(--secondary); }
        
        .hidden { display: none; }
        input[type="text"], input[type="number"], input[type="password"] { width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; font-size: 16px; }
        
        .sticky-bar { background:#fff; position:sticky; top:0; padding:15px; border-bottom:3px solid var(--primary); z-index:100; display:flex; justify-content:space-between; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* Review Styles */
        .correct-ans { color: #2e7d32; font-weight: bold; margin-top: 5px; }
        .wrong-ans { color: #d32f2f; font-weight: bold; }

        /* Premium Certificate Style with Watermark */
        #certificate-template { 
            width: 800px; height: 600px; padding: 50px; text-align: center; 
            border: 20px double var(--gold); background: #fff; 
            position: absolute; left: -9999px; box-sizing: border-box;
            background-image: radial-gradient(circle, #fdfbf7 20%, #ffffff 100%);
            overflow: hidden;
        }
        #certificate-template::before {
            content: 'GALIB ACADEMY';
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 80px; font-weight: 900;
            color: rgba(0, 0, 0, 0.03); z-index: 0; white-space: nowrap;
        }
        .cert-header { font-size: 50px; color: var(--primary); margin-bottom: 5px; font-weight: bold; z-index: 1; position: relative; }
        .cert-body { z-index: 1; position: relative; }
    </style>
</head>
<body>

<div class="header">
    <h1>গালিব একাডেমি (Galib Academy)</h1>
    <p>অনলাইন মেধা যাচাই পরীক্ষা - ২০২৬</p>
    <small>পরিচালক: গালিব আল সিয়াম</small>
</div>

<div class="container" id="step-1">
    <div class="card">
        <h2 style="text-align:center; color: var(--primary);">পরীক্ষার্থী নির্দেশিকা</h2>
        <p>আসসালামু আলাইকুম। গালিব একাডেমির অনলাইন পরীক্ষায় অংশ নিতে নিচের ধাপগুলো অনুসরণ করুন:</p>
        <ul style="text-align: left; line-height: 1.8;">
            <li>নির্ধারিত ফি নগদ পেমেন্ট করুন: <b>০১৭৩৪৫০৫৮৬৯</b></li>
            <li>পেমেন্ট করার পর হোয়াটসঅ্যাপে নাম ও রোল দিয়ে পাসওয়ার্ড সংগ্রহ করুন।</li>
        </ul>
        <button class="btn btn-exam" onclick="goStep(2)">রেজিস্ট্রেশন শুরু করুন</button>
        <a href="https://wa.me/8801734505869" class="btn btn-wa">পাসওয়ার্ডের জন্য মেসেজ দিন</a>
    </div>
</div>

<div class="container hidden" id="step-2">
    <div class="card">
        <h3 style="color: var(--primary);">শিক্ষার্থীর তথ্য প্রদান করুন</h3>
        <input type="text" id="s-name" placeholder="আপনার পূর্ণ নাম (বাংলায়)">
        <input type="number" id="s-roll" placeholder="রোল নম্বর">
        <input type="text" id="s-madrasa" placeholder="মাদ্রাসার নাম">
        <button class="btn btn-exam" onclick="saveInfo()">পরবর্তী ধাপ</button>
    </div>
</div>

<div class="container hidden" id="step-3">
    <div class="card">
        <h3 style="text-align:center;">আপনার ক্লাস নির্বাচন করুন</h3>
        <button class="btn btn-exam" onclick="selectClass('q6')">৬ষ্ঠ শ্রেণি</button>
        <button class="btn btn-exam" onclick="selectClass('q7')">৭ম শ্রেণি</button>
        <button class="btn btn-exam" onclick="selectClass('q8')">৮ম শ্রেণি</button>
        <button class="btn btn-exam" onclick="selectClass('q9')">৯ম শ্রেণি</button>
    </div>
</div>

<div class="container hidden" id="step-4">
    <div class="card">
        <h3>সিকিউরিটি পাসওয়ার্ড</h3>
        <input type="password" id="exam-pass" placeholder="পাসওয়ার্ড লিখুন">
        <button class="btn btn-exam" onclick="checkPass()">পরীক্ষা শুরু করুন</button>
    </div>
</div>

<div class="container hidden" id="exam-area">
    <div class="sticky-bar">
        <span id="h-name"></span>
        <span id="timer-box" style="color:red;">সময় বাকি - ১০:০০</span>
    </div>
    <div id="qs-container" style="margin-top:20px;"></div>
    <button class="btn btn-exam" onclick="submitExam()">পরীক্ষা সাবমিট করুন</button>
</div>

<div class="container hidden" id="result-area">
    <div class="card" style="text-align:center;">
        <h2 style="color:var(--secondary);">আলহামদুলিল্লাহ, পরীক্ষা সম্পন্ন হয়েছে!</h2>
        <div id="score-text" style="font-size:26px; font-weight:bold; margin:20px; color: var(--primary);"></div>
        <button class="btn btn-exam" onclick="downloadCert()">সাফল্যের সনদ ডাউনলোড করুন</button>
        <a id="wa-share" href="#" target="_blank" class="btn btn-wa">শিক্ষককে ফলাফল পাঠান</a>
        <hr style="margin: 30px 0;">
        <h3 style="color: var(--accent);">আপনার উত্তরপত্র যাচাই করুন</h3>
        <div id="review-container" style="text-align: left;"></div>
    </div>
</div>

<div id="certificate-template">
    <div class="cert-body">
        <div style="width: 80px; height: 80px; border: 2px solid var(--gold); border-radius: 50%; margin: 0 auto 10px; line-height: 80px; color: var(--gold); font-weight: bold;">GA</div>
        <h1 class="cert-header">গালিব একাডেমি</h1>
        <h2 style="color: #2e7d32; font-size: 30px; margin-top: 5px;">সাফল্যের সনদপত্র</h2>
        <p style="font-size:22px; margin-top:30px;">এই মর্মে প্রত্যয়ন করা যাচ্ছে যে,</p>
        <h2 style="font-size: 38px; border-bottom: 2px solid #333; display: inline-block; padding: 0 30px; margin: 10px 0;"><span id="ct-name"></span></h2>
        <p style="font-size:20px;">মাদ্রাসা: <span id="ct-m"></span>, রোল: <span id="ct-r"></span></p>
        <p style="font-size:22px;">তিনি ২০২৬ সালের অনলাইন মেধা যাচাই পরীক্ষায় ৩০-এ <b><span id="ct-s"></span></b> নম্বর পেয়ে উত্তীর্ণ হয়েছেন।</p>
        <div style="margin-top:50px; display:flex; justify-content:space-between; padding: 0 50px;">
            <div style="text-align:center;"><p>১৯/০১/২০২৬</p><p style="border-top:2px solid #000; width: 120px;">তারিখ</p></div>
            <div style="text-align:center;"><p><b>গালিব আল সিয়াম</b></p><p style="border-top:2px solid #000; width: 150px;">পরিচালক স্বাক্ষর</p></div>
        </div>
    </div>
</div>

<script>
    let studentData = {};
    let selectedClass = "";
    let currentQuestions = [];
    const validPasses = ["বিসমিল্লাহ", "আলহামদুলিল্লাহ", "সুবহানাল্লাহ", "আল্লাহু আকবর"];
    const adminCode = "GalibAdmin";

    const examDB = {
        "q6": [
            {q: "মাখরাজ মোট কয়টি?", o: ["১৭টি", "১৫টি", "১৯টি", "২১টি"], a: "১৭টি"},
            {q: "তাজভিদ শব্দের অর্থ কী?", o: ["সুন্দর করা", "মুখস্থ করা", "দ্রুত পড়া", "থামা"], a: "সুন্দর করা"},
            {q: "হলকের হরফ কয়টি?", o: ["৬টি", "৪টি", "৮টি", "১০টি"], a: "৬টি"},
            {q: "কলকলাহর হরফ কয়টি?", o: ["৫টি", "৬টি", "৭টি", "৮টি"], a: "৫টি"},
            {q: "ইকলাব শব্দের অর্থ কী?", o: ["বদলানো", "গোপন করা", "স্পষ্ট করা", "মিলানো"], a: "বদলানো"},
            {q: "জিহ্বার আগা থেকে মাখরাজ কয়টি?", o: ["৫টি", "৩টি", "৪টি", "৬টি"], a: "৫টি"},
            {q: "নুনে কুতনী কাকে বলে?", o: ["ছোট নুন", "বড় নুন", "যযম নুন", "পেশ"], a: "ছোট নুন"},
            {q: "মাদ্দে আসলী কত আলিফ টানতে হয়?", o: ["১ আলিফ", "৩ আলিফ", "৪ আলিফ", "৫ আলিফ"], a: "১ আলিফ"},
            {q: "তানভীন কাকে বলে?", o: ["২ যবর, ২ যের, ২ পেশ", "যযম", "হরকত", "মাদ্দ"], a: "২ যবর, ২ যের, ২ পেশ"},
            {q: "কুরআন মাজিদ নাযিল হাওয়ার পদ্ধতি কয়টি?", o: ["৫", "৭", "৪৬", "৩"], a: "৭"},
            {q: "মাদ্দে লাযিম কয় প্রকার?", o: ["৪ প্রকার", "২ প্রকার", "৬ প্রকার", "৮ প্রকার"], a: "৪ প্রকার"},
            {q: "সাকতাহ শব্দের অর্থ কী?", o: ["দম না ছেড়ে থামা", "দম ছেড়ে থামা", "না থামা", "দ্রুত পড়া"], a: "দম না ছেড়ে থামা"},
            {q: "ইখফার হরফ কয়টি?", o: ["১৫টি", "১০টি", "১২টি", "১৭টি"], a: "১৫টি"},
            {q: "ইদগাম শব্দের অর্থ কী?", o: ["মিলিয়ে পড়া", "স্পষ্ট করা", "টেনে পড়া", "গোপন করা"], a: "মিলিয়ে পড়া"},
            {q: "মীম সাকিন পড়ার নিয়ম কয়টি?", o: ["৩টি", "২টি", "৪টি", "৫টি"], a: "৩টি"},
            {q: "কুরআনে রুকু সংখ্যা কত?", o: ["৫৫৬", "৫৪০", "৫৫৪", "৫৬০"], a: "৫৫৬"},
            {q: "হুরূফে শামসিয়া কয়টি?", o: ["১৪টি", "১০টি", "১২টি", "১৬টি"], a: "১৪টি"},
            {q: "আল্লাহ শব্দের লাম কখন চিকন হয়?", o: ["যের থাকলে", "যবর থাকলে", "পেশ থাকলে", "সব সময়"], a: "যের থাকলে"},
            {q: "সিফাতে লাযিমাহ কাকে বলে?", o: ["স্থায়ী গুণ", "অস্থায়ী গুণ", "মাঝে মাঝে হয়", "সুর"], a: "স্থায়ী গুণ"},
            {q: "মাদ্দে লীন এর হরফ কয়টি?", o: ["২টি", "৩টি", "৪টি", "৫টি"], a: "২টি"},
            {q: "তারকীক শব্দের অর্থ কী?", o: ["চিকন করা", "মোটা করা", "স্পষ্ট করা", "টানা"], a: "চিকন করা"},
            {q: "মাদ্দে আরজি কত আলিফ টানতে হয়?", o: ["৩ আলিফ", "১ আলিফ", "৪ আলিফ", "৫ আলিফ"], a: "৩ আলিফ"},
            {q: "ওয়াকফ শব্দের অর্থ কী?", o: ["থামা", "শুরু করা", "না থামা", "মিলিয়ে পড়া"], a: "থামা"},
            {q: "সিফাত মোট কতটি?", o: ["১৭টি", "১৮টি", "১৯টি", "২০টি"], a: "১৭টি"},
            {q: "তাজভিদ অনুযায়ী কুরআন পড়া কী?", o: ["ওয়াজিব", "সুन्नत", "মুস্তাহাব", "মাকরূহ"], a: "ওয়াজিব"},
            {q: "ইসলাম অর্থ কি?", o: ["আত্মসমর্পণ করা", "ধর্ম", "বদলানো", "বিজয়"], a: "আত্মসমর্পণ করা"},
            {q: "মাদ্দে মুনফাসিল কত আলিফ?", o: ["৩ আলিফ", "১ আলিফ", "৪ আলিফ", "৫ আলিফ"], a: "৩ আলিফ"},
            {q: "কলকলাহর হরফগুলো কী কী?", o: ["ক্বতবা জাদিন", "আলিফ বা তা", "লাম মীম", "সবগুলো"], a: "ক্বতবা জাদিন"},
            {q: "মাদ্দে মুত্তাসিল কত আলিফ?", o: ["৪ আলিফ", "১ আলিফ", "৩ আলিফ", "৫ আলিফ"], a: "৪ আলিফ"},
            {q: "তাজভিদ শাস্ত্রের মৌলিক উৎস কী?", o: ["কুরআন", "হাদীস", "ইজমা", "কিয়াস"], a: "কুরআন"}
        ],
        "q7": [
            {q: "রাসূল (সা.) এর দুধমাতার নাম কী?", o: ["হალიমা (রা)", "আমিনা", "খাদিজা", "ফাতিমা"], a: "হალიমা (রা)"},
            {q: "ইসলামের প্রথম জিহাদ কোনটি?", o: ["বদর", "উহুদ", "খন্দক", "খায়বর"], a: "বদর"},
            {q: "জান্নাতের সুসংবাদপ্রাপ্ত সাহাবী কতজন?", o: ["১০ জন", "৫ জন", "১৫ জন", "২০ জন"], a: "১০ জন"},
            {q: "কুরআনের দীর্ঘতম সূরা কোনটি?", o: ["বাকারা", "আলে ইমরান", "নিসা", "মায়েদা"], a: "বাকারা"},
            {q: "ইসলামের স্তম্ভ কয়টি?", o: ["৫টি", "৩টি", "৪টি", "৬টি"], a: "৫টি"},
            {q: "কুরআনের প্রাণ বলা হয় কোন সূরাকে?", o: ["ইয়াসিন", "রহমান", "বাকারা", "ইখলাস"], a: "ইয়াসিন"},
            {q: "পবিত্র কুরআন প্রথম কোথায় নাযিল হয়?", o: ["হেরা গুহায়", "মক্কা", "মদীনা", "তুর পাহাড়ে"], a: "হেরা গুহায়"},
            {q: "মাদ্দে লীন এর হরফ কয়টি?", o: ["২টি", "৩টি", "৪টি", "৫টি"], a: "২টি"},
            {q: "বিসমিল্লাহ নেই কোন সূরায়?", o: ["তওবা", "নামল", "নাস", "বাকারা"], a: "তওবা"},
            {q: "হজ কোন মাসে পালন করা হয়?", o: ["জিলহজ", "রমজান", "শাওয়াল", "জিলকদ"], a: "জিলহজ"},
            {q: "মাদ্দে আসলী কত আলিফ টানতে হয়?", o: ["১ আলিফ", "৩ আলিফ", "৪ আলিফ", "৫ আলিফ"], a: "১ আলিফ"},
            {q: "মাখরাজ শব্দের অর্থ কী?", o: ["বের হওয়ার স্থান", "থামার স্থান", "বসার স্থান", "পড়ার স্থান"], a: "বের হওয়ার স্থান"},
            {q: "সিফাতে লাযিমাহ কয় প্রকার?", o: ["২ প্রকার", "৩ প্রকার", "৪ প্রকার", "৫ প্রকার"], a: "২ প্রকার"},
            {q: "ইদগামে বা-গুন্নাহর হরফ কয়টি?", o: ["৪টি", "২টি", "৩টি", "৫টি"], a: "৪টি"},
            {q: "নুন সাকিন পড়ার নিয়ম কয়টি?", o: ["৪টি", "২টি", "৩টি", "৫টি"], a: "৪টি"},
            {q: "ইকলাব এর হরফ কোনটি?", o: ["বা", "তা", "সা", "জিম"], a: "বা"},
            {q: "মাদ্দে আরজি হয় কোথায়?", o: ["আয়াতের শেষে", "শব্দের মাঝে", "শুরুতে", "সবখানে"], a: "আয়াতের শেষে"},
            {q: "খাড় যবর থাকলে কত আলিফ টানতে হয়?", o: ["১ আলিফ", "২ আলিফ", "৩ আলিফ", "৪ আলিফ"], a: "১ আলিফ"},
            {q: "র যবর হলে কেমন পড়তে হয়?", o: ["মোটা", "চিকন", "স্পষ্ট", "গোপন"], a: "মোটা"},
            {q: "বিশ্বের বৃহত্তম মহাসাগর কোনটি?", o: ["প্রশান্ত", "আটলান্টিক", "ভারত", "উত্তর"], a: "প্রশান্ত"},
            {q: "বাংলাদেশের জাতীয় পশু কোনটি?", o: ["রয়েল বেঙ্গল টাইগার", "সিংহ", "হাতি", "হরিণ"], a: "রয়েল বেঙ্গল টাইগার"},
            {q: "কুরআনে মোট সেজদা কয়টি?", o: ["14টি", "12টি", "15টি", "16টি"], a: "14টি"},
            {q: "উম্মুল কুরআন কোন সূরা?", o: ["সূরা ফাতেহা", "সূরা বাকারা", "সূরা ইখলাস", "সূরা নাস"], a: "সূরা ফাতেহা"},
            {q: "ইসলামের প্রথম খলিফা কে?", o: ["আবু বকর (রা)", "ওমর (রা)", "উসমান (রা)", "আলী (রা)"], a: "আবু বকর (রা)"},
            {q: "সালাত শব্দের অর্থ কী?", o: ["সবগুলো", "দোয়া", "শান্তি", "রহমত"], a: "সবগুলো"},
            {q: "ইদগাম অর্থ কী?", o: ["মিলিয়ে পড়া", "স্পষ্ট করা", "গোপন করা", "বদলানো"], a: "মিলিয়ে পড়া"},
            {q: "জিহ্বার গোড়া থেকে কোন হরফ উচ্চারিত হয়?", o: ["ক্বাফ", "লাম", "নুন", "র"], a: "ক্বাফ"},
            {q: "মাদ্দে মুত্তাসিল কত আলিফ?", o: ["৪ আলিফ", "১ আলিফ", "২ আলিফ", "৩ আলিফ"], a: "৪ আলিফ"},
            {q: "কলকলাহর হরফগুলো কী কী?", o: ["ক্বতবা জাদিন", "আলিফ বা তা", "লাম মীম", "সবগুলো"], a: "ক্বতবা জাদিন"},
            {q: "হলক অর্থ কী?", o: ["কণ্ঠনালী", "জিহ্বা", "ঠোঁট", "নাক"], a: "কণ্ঠনালী"}
        ],
        "q8": [
            {q: "হুরূফে শামসিয়া কয়টি?", o: ["১৪টি", "১০টি", "১২টি", "১৬টি"], a: "১৪টি"},
            {q: "মাদ্দে লাযিম কয় প্রকার?", o: ["৪ প্রকার", "২ প্রকার", "৩ প্রকার", "৫ প্রকার"], a: "৪ প্রকার"},
            {q: "ইদগামে বেলা গুন্নাহর হরফ কয়টি?", o: ["২টি", "৪টি", "৬টি", "৮টি"], a: "২টি"},
            {q: "মাদ্দে মুনফাসিল কত আলিফ?", o: ["৩ আলিফ", "১ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
            {q: "সিফাতে মুতাদাদদাহ কাকে বলে?", o: ["বিপরীতমুখী গুণ", "স্থায়ী গুণ", "অস্থায়ী গুণ", "সুর"], a: "বিপরীতমুখী গুণ"},
            {q: "জিহ্বার মধ্যখান থেকে কোন হরফ বের হয়?", o: ["জিম", "কাফ", "লাম", "নুন"], a: "জিম"},
            {q: "তাজভিদ শাস্ত্রের প্রবর্তক কে?", o: ["রাসূল (সা.)", "আবু বকর (রা)", "উসমান (রা)", "আলী (রা)"], a: "রাসূল (সা.)"},
            {q: "আল্লাহ শব্দের লাম মোটা হয় কখন?", o: ["যবর বা পেশ থাকলে", "যের থাকলে", "সাকিন থাকলে", "সব সময়"], a: "যবর বা পেশ থাকলে"},
            {q: "মাদ্দে লীন কয়টি?", o: ["২টি", "৩টি", "৪টি", "৫টি"], a: "২টি"},
            {q: "নুনে কুতনী কখন পড়তে হয়?", o: ["দুই আয়াতের মিলের সময়", "শুরুতে", "শেষে", "মাঝে"], a: "দুই আয়াতের মিলের সময়"},
            {q: "হুদায়বিয়ার সন্ধি কত হিজরিতে হয়?", o: ["৬ হিজরি", "৫ হিজরি", "৪ হিজরি", "৭ হিজরি"], a: "৬ হিজরি"},
            {q: "উহুদ যুদ্ধে মুসলিম সেনাপতি কে ছিলেন?", o: ["রাসূল (সা.)", "হামজা (রা)", "আলী (রা)", "খালিদ (রা)"], a: "রাসূল (সা.)"},
            {q: "প্রথম কুরআন লেখক কে?", o: ["যায়েদ বিন সাবিত", "ওমর (রা)", "আলী (রা)", "উসমান (রা)"], a: "যায়েদ বিন সাবিত"},
            {q: "বাংলাদেশের জাতীয় কবির নাম কী?", o: ["নজরুল", "রবীন্দ্রনাথ", "জসীমউদ্দীন", "জীবনানন্দ"], a: "নজরুল"},
            {q: "পৃথিবীর বৃহত্তম মহাদেশ কোনটি?", o: ["এশিয়া", "আফ্রিকা", "ইউরোপ", "আমেরিকা"], a: "এশিয়া"},
            {q: "বাংলাদেশের বিজয় দিবস কবে?", o: ["১৬ ডিসেম্বর", "২১ ফেব্রুয়ারি", "২৬ মার্চ", "১৪ ডিসেম্বর"], a: "১৬ ডিসেম্বর"},
            {q: "কুরআনের মোট আয়াত সংখ্যা কত?", o: ["৬২৩৬", "৬৬৬৬", "৬০০০", "৬৫০০"], a: "৬২৩৬"},
            {q: "ইসলামের দ্বিতীয় খলিফা কে?", o: ["ওমর (রা)", "আবু বকর (রা)", "উসমান (রা)", "আলী (রা)"], a: "ওমর (রা)"},
            {q: "হাজরে আসওয়াদ কোন রঙের পাথর?", o: ["কালো", "সাদা", "লাল", "সবুজ"], a: "কালো"},
            {q: "সবচেয়ে বেশি হাদিস বর্ণনা করেছেন কে?", o: ["আবু হুরায়রা (রা)", "আবু বকর (রা)", "আয়েশা (রা)", "ওমর (রা)"], a: "আবু হুরায়রা (রা)"},
            {q: "মক্বার বিজয়ের সাল কোনটি?", o: ["৮ হিজরি", "৬ হিজরি", "৭ হিজরি", "৯ হিজরি"], a: "৮ হিজরি"},
            {q: "কুরআনের কোন সূরাকে উম্মুল কিতাব বলা হয়?", o: ["সূরা ফাতেহা", "সূরা বাকারা", "সূরা ইখলাস", "সূরা ইয়াসিন"], a: "সূরা ফাতেহা"},
            {q: "মাদ্দে আরজি কত আলিফ টানতে হয়?", o: ["৩ আলিফ", "১ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
            {q: "হলকের হরফ কয়টি?", o: ["৬টি", "৪টি", "৫টি", "৭টি"], a: "৬টি"},
            {q: "গুন্নাহ করার স্থান কোনটি?", o: ["নাসিকা", "মুখ", "গলা", "ঠোঁট"], a: "নাসিকা"},
            {q: "ইদগামে বেলা গুন্নাহর হরফ কয়টি?", o: ["২টি", "৩টি", "৪টি", "৫টি"], a: "২টি"},
            {q: "কলকলাহর হরফ কয়টি?", o: ["৫টি", "৬টি", "৭টি", "৮টি"], a: "৫টি"},
            {q: "ওয়াকফ শব্দের অর্থ কী?", o: ["থামা", "শুরু করা", "না থামা", "মিলা করা"], a: "থামা"},
            {q: "মাদ্দে আসলী কত আলিফ?", o: ["১ আলিফ", "২ আলিফ", "৩ আলিফ", "৪ আলিফ"], a: "১ আলিফ"},
            {q: "তাজভিদ শিক্ষা করা কী?", o: ["ফরজে আইন", "ফরজে কেফায়া", "সুन्नत", "ওয়াজিব"], a: "ফরজে আইন"}
        ],
        "q9": [
            {q: "২০২৬ পাঠ্যবই অনুযায়ী 'আল-ফিকহ' এর অর্থ?", o: ["গভীর জ্ঞান", "মুখস্থ", "পড়া", "লেখা"], a: "গভীর জ্ঞান"},
            {q: "মাখরাজ মোট কয়টি?", o: ["১৭টি", "১৫টি", "১৮টি", "২০টি"], a: "১৭টি"},
            {q: "তাজভিদ অনুযায়ী কুরআন পড়া কী?", o: ["ওয়াজিব", "সুন্নত", "মুস্তাহাব", "মাকরূহ"], a: "ওয়াজিব"},
            {q: "মাদ্দে লাযিম কত আলিফ টানতে হয়?", o: ["৪ আলিফ", "১ আলিফ", "২ আলিফ", "৩ আলিফ"], a: "৪ আলিফ"},
            {q: "হলকের হরফ কয়টি?", o: ["৬টি", "৪টি", "৫টি", "৭টি"], a: "৬টি"},
            {q: "ইদগাম অর্থ কী?", o: ["মিলিয়ে পড়া", "স্পষ্ট করা", "টেনে পড়া", "গোপন করা"], a: "মিলিয়ে পড়া"},
            {q: "মাদ্দে আসলী কত আলিফ?", o: ["১ আলিফ", "৩ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "১ আলিফ"},
            {q: "জিহ্বার মধ্যখান থেকে কোন হরফটি বের হয়?", o: ["জিম", "ক্বাফ", "লাম", "নুন"], a: "জিম"},
            {q: "ইদগামে বেলা-গুন্নাহর হরফ কয়টি?", o: ["২টি", "৪টি", "৬টি", "৮টি"], a: "২টি"},
            {q: "ইখফার হরফ কয়টি?", o: ["১৫টি", "১২টি", "১০টি", "১৭টি"], a: "১৫টি"},
            {q: "ইকলাব এর হরফ কোনটি?", o: ["বা", "তা", "সা", "জিম"], a: "বা"},
            {q: "ওয়াজিব গুন্নাহ কখন হয়?", o: ["নুন ও মীমে তাশদীদ হলে", "যযম হলে", "পেশ হলে", "যের হলে"], a: "নুন ও মীমে তাশদীদ হলে"},
            {q: "আল্লাহ শব্দের লাম মোটা হয় কখন?", o: ["যবর বা পেশ থাকলে", "যের থাকলে", "সব সময়", "কখনো না"], a: "যবর বা পেশ থাকলে"},
            {q: "হুরূফে শামসিয়া কয়টি?", o: ["১৪টি", "১২টি", "১০টি", "১৬টি"], a: "১৪টি"},
            {q: "কুরআনে মোট সেজদাহ কয়টি?", o: ["১৪টি", "১৫টি", "১২টি", "১৩টি"], a: "১৪টি"},
            {q: "তাজভীদ শাস্ত্রের প্রবর্তক কে?", o: ["রাসূল (সা.)", "সাহাবীগণ", "ইমামগণ", "সবাই"], a: "রাসূল (সা.)"},
            {q: "কলকলাহর হরফ কয়টি?", o: ["৫টি", "৬টি", "৪টি", "৭টি"], a: "৫টি"},
            {q: "মাদ্দে লীন এর হরফ কয়টি?", o: ["২টি", "৩টি", "৪টি", "৫টি"], a: "২টি"},
            {q: "পবিত্র কুরআনে রুকু সংখ্যা কতটি?", o: ["৫৫৬", "৫৪০", "৫৫৮", "৫৬০"], a: "৫৫৬"},
            {q: "তারকীক শব্দের অর্থ কী?", o: ["চিকন করা", "মোটা করা", "স্পষ্ট করা", "টানা"], a: "চিকন করা"},
            {q: "মাদ্দে আরজি কত আলিফ টানতে হয়?", o: ["৩ আলিফ", "১ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
            {q: "ওয়াকফ শব্দের অর্থ কী?", o: ["থামা", "পড়া", "চলা", "মিলানো"], a: "থামা"},
            {q: "সিফাত মোট কতটি?", o: ["১৭টি", "১৮টি", "১৯টি", "২০টি"], a: "১৭টি"},
            {q: "মাদ্দে মুনফাসিল কত আলিফ?", o: ["৩ আলিফ", "১ আলিফ", "২ আলিফ", "৪ আলিফ"], a: "৩ আলিফ"},
            {q: "তানভীন কাকে বলে?", o: ["২ যবর, ২ যের, ২ পেশ", "যযম", "তাশদীদ", "মাদ্দ"], a: "২ যবর, ২ যের, ২ পেশ"},
            {q: "জান্নাতের চাবি কোনটি?", o: ["সালাত", "হজ", "যাকাত", "সাওম"], a: "সালাত"},
            {q: "প্রথম আযান দাতা কে?", o: ["বিলাল (রা)", "আবু বকর (রা)", "হামজা (রা)", "খালিদ (রা)"], a: "বিলাল (রা)"},
            {q: "মাতা-পিতার অবাধ্য হওয়া কী?", o: ["কবিরা গুনাহ", "সগিরা গুনাহ", "জায়েজ", "মাকরূহ"], a: "কবিরা গুনাহ"},
            {q: "মাদ্দে মুত্তাসিল কত আলিফ?", o: ["৪ আলিফ", "৩ আলিফ", "১ আলিফ", "২ আলিফ"], a: "৪ আলিফ"},
            {q: "মক্বার বিজয়ের সাল কোনটি?", o: ["৮ হিজরি", "৬ হিজরি", "৭ হিজরি", "৯ হিজরি"], a: "৮ হিজরি"}
        ]
    };

    function goStep(s) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById(typeof s === 'string' ? s : 'step-' + s).classList.remove('hidden');
        window.scrollTo(0,0);
    }

    function saveInfo() {
        studentData = {
            n: document.getElementById('s-name').value,
            r: document.getElementById('s-roll').value,
            m: document.getElementById('s-madrasa').value
        };
        if(!studentData.n || !studentData.r) alert("অনুগ্রহ করে সঠিক তথ্য দিন"); else goStep(3);
    }

    function selectClass(c) { selectedClass = c; goStep(4); }

    function checkPass() {
        const p = document.getElementById('exam-pass').value.trim();
        if(p === adminCode || validPasses.includes(p)) startExam();
        else alert("ভুল পাসওয়ার্ড!");
    }

    function startExam() {
        goStep('exam-area');
        document.getElementById('h-name').innerText = "পরীক্ষার্থী: " + studentData.n;
        currentQuestions = [...examDB[selectedClass]].sort(() => Math.random() - 0.5);
        
        document.getElementById('qs-container').innerHTML = currentQuestions.map((item, i) => {
            let opts = [...item.o].sort(() => Math.random() - 0.5);
            return `
                <div class="q-box">
                    <p><b>${i+1}. ${item.q}</b></p>
                    ${opts.map(o => `<label class="option-label"><input type="radio" name="q${i}" value="${o}"> ${o}</label>`).join('')}
                </div>
            `;
        }).join('');
        
        let time = 600;
        window.intv = setInterval(() => {
            time--;
            let m = Math.floor(time/60), s = time%60;
            document.getElementById('timer-box').innerText = `সময় বাকি - ${m}:${s<10?'0':''}${s}`;
            if(time <= 0) { clearInterval(window.intv); submitExam(); }
        }, 1000);
    }

    function submitExam() {
        clearInterval(window.intv);
        let s = 0;
        let reviewHTML = "";
        currentQuestions.forEach((item, i) => {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            const isC = sel && sel.value === item.a;
            if(isC) s++;
            reviewHTML += `
                <div class="q-box" style="border-left: 5px solid ${isC ? 'green' : 'red'};">
                    <p><b>${item.q}</b></p>
                    <p>আপনার উত্তর: <span class="${isC ? 'correct-ans' : 'wrong-ans'}">${sel ? sel.value : 'উত্তর দেননি'}</span></p>
                    ${!isC ? `<p class="correct-ans">সঠিক উত্তর: ${item.a}</p>` : ''}
                </div>
            `;
        });

        window.finalScore = s;
        goStep('result-area');
        document.getElementById('score-text').innerHTML = `আপনার স্কোর: ${s} / ৩০`;
        document.getElementById('review-container').innerHTML = reviewHTML;
        document.getElementById('wa-share').href = `https://wa.me/8801734505869?text=${encodeURIComponent('নাম: '+studentData.n+', স্কোর: '+s+'/৩০')}`;
    }

    function downloadCert() {
        document.getElementById('ct-name').innerText = studentData.n;
        document.getElementById('ct-m').innerText = studentData.m;
        document.getElementById('ct-r').innerText = studentData.r;
        document.getElementById('ct-s').innerText = window.finalScore;
        html2canvas(document.getElementById('certificate-template'), {scale: 2}).then(canvas => {
            let link = document.createElement('a');
            link.download = `Certificate_${studentData.n}.png`;
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    window.onbeforeunload = function() {
        if (!document.getElementById('exam-area').classList.contains('hidden')) return "পরীক্ষা চলছে!";
    };
</script>
</body>
</html>
